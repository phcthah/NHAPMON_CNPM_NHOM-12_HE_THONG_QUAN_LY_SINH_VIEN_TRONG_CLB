{% extends 'layout.html' %}
{% block title %}Tài chính{% endblock %}
{% block content %}
<h3>Tài chính</h3>
<div class="card mb-4">
  <div class="card-body">
    {% if errors %}
      <div class="alert alert-danger">
        <ul class="mb-0">
          {% for e in errors %}<li>{{ e }}</li>{% endfor %}
        </ul>
      </div>
    {% endif %}
    <form method="post" action="{{ url_for('finance.add_entry') }}">
      <div class="row">
        <div class="col-md-7"><input class="form-control" name="description" placeholder="Mô tả" required value="{{ form.description if form and form.description is not none else '' }}"></div>
        <div class="col-md-3"><input class="form-control" name="amount" placeholder="Số tiền" required value="{{ form.amount if form and form.amount is not none else '' }}"></div>
        <div class="col-md-2"><button class="btn btn-success">Ghi nhận</button></div>
      </div>
    </form>
  </div>
</div>

<table class="table table-striped">
  <thead><tr><th>#</th><th>Mô tả</th><th>Số tiền</th><th>Ngày</th></tr></thead>
  <tbody>
    {% for e in entries %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ e.description }}</td>
        <td>{{ '%.2f'|format(e.amount) }}</td>
        <td>{{ e.date.strftime('%Y-%m-%d') }}</td>
        <td>
          <a class="btn btn-sm btn-secondary" href="{{ url_for('finance.edit_entry', id=e.id) }}">Sửa</a>
          <form method="post" action="{{ url_for('finance.delete_entry', id=e.id) }}" style="display:inline; margin-left:6px">
            <button class="btn btn-sm btn-danger" onclick="return confirm('Xóa mục này?')">Xóa</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}