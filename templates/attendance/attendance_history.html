{% extends 'layout.html' %}
{% block title %}Lịch sử điểm danh{% endblock %}
{% block content %}
<h3>Lịch sử điểm danh</h3>
<table class="table table-striped">
  <thead><tr><th>Ngày</th><th>Số có mặt</th><th>Hành động</th></tr></thead>
  <tbody>
    {% for h in history %}
      <tr>
        <td>{{ h.date.strftime('%Y-%m-%d') }}</td>
        <td>{{ h.present_count }}</td>
        <td>
          <a class="btn btn-sm btn-secondary" href="{{ url_for('attendance.view_attendance', date_str=h.date.strftime('%Y-%m-%d')) }}">Xem</a>
          {% if current_user.is_admin %}
            <form method="post" action="{{ url_for('attendance.delete_attendance_date', date_str=h.date.strftime('%Y-%m-%d')) }}" style="display:inline; margin-left:6px">
              <button class="btn btn-sm btn-danger" onclick="return confirm('Xóa tất cả điểm danh trong ngày này?')">Xóa</button>
            </form>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}